{% extends '@PrestaShop/Admin/layout.html.twig' %}

{% block content %}
  <div class="row">
    <div class="col-12">
      {% embed '@PrestaShop/Admin/Common/Grid/grid_panel.html.twig' with { grid: shipmentGrid } %}
        {% block grid_panel_header %}
          <div class="card-header js-grid-header d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
              <h3 class="card-header-title mb-0">{{ 'Envíos generados'|trans({}, 'Modules.RjMulticarrier.Admin') }}</h3>
              <span class="badge badge-secondary ml-2">{{ grid.data.records_total }}</span>
            </div>
            <div class="d-flex align-items-center">
              <a
                href="{{ path('admin_rj_multicarrier_info_packages_index') }}"
                class="btn btn-outline-primary btn-sm mr-2"
              >
                {{ 'Generar nuevos envíos'|trans({}, 'Modules.RjMulticarrier.Admin') }}
              </a>
              {{ include('@PrestaShop/Admin/Common/Grid/Blocks/grid_actions.html.twig', { grid: grid }) }}
            </div>
          </div>
        {% endblock %}
      {% endembed %}
    </div>
  </div>

  <div
    class="modal fade js-detail-modal"
    id="rj_shipment_detail_modal"
    tabindex="-1"
    role="dialog"
    aria-hidden="true"
    data-empty="{{ 'No disponible'|trans({}, 'Modules.RjMulticarrier.Admin') }}"
    data-error-generic="{{ 'No se pudo cargar el detalle del envío.'|trans({}, 'Modules.RjMulticarrier.Admin') }}"
    data-error-not-found="{{ 'El envío solicitado ya no existe.'|trans({}, 'Modules.RjMulticarrier.Admin') }}"
    data-trigger=".js-shipment-view-row-action"
  >
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title mb-0">{{ 'Detalle del envío'|trans({}, 'Modules.RjMulticarrier.Admin') }}</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="{{ 'Cerrar'|trans({}, 'Admin.Actions') }}">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="alert alert-danger d-none js-detail-error" role="alert"></div>

          <div class="text-center my-4 d-none js-detail-spinner">
            <span class="spinner-border" role="status" aria-hidden="true"></span>
            <span class="sr-only">{{ 'Cargando…'|trans({}, 'Admin.Actions') }}</span>
          </div>

          <div class="js-detail-content d-none">
            <dl class="row">
              <dt class="col-sm-4">{{ 'ID envío'|trans({}, 'Modules.RjMulticarrier.Admin') }}</dt>
              <dd class="col-sm-8 js-detail-field" data-detail-field="id">—</dd>

              <dt class="col-sm-4">{{ 'ID pedido'|trans({}, 'Modules.RjMulticarrier.Admin') }}</dt>
              <dd class="col-sm-8 js-detail-field" data-detail-field="orderId">—</dd>

              <dt class="col-sm-4">{{ 'Referencia pedido'|trans({}, 'Modules.RjMulticarrier.Admin') }}</dt>
              <dd class="col-sm-8 js-detail-field" data-detail-field="orderReference">—</dd>

              <dt class="col-sm-4">{{ 'Número de envío'|trans({}, 'Modules.RjMulticarrier.Admin') }}</dt>
              <dd class="col-sm-8 js-detail-field" data-detail-field="shipmentNumber">—</dd>

              <dt class="col-sm-4">{{ 'Transportista'|trans({}, 'Modules.RjMulticarrier.Admin') }}</dt>
              <dd class="col-sm-8 js-detail-field" data-detail-field="carrierShortName">—</dd>

              <dt class="col-sm-4">{{ 'Creado el'|trans({}, 'Modules.RjMulticarrier.Admin') }}</dt>
              <dd class="col-sm-8 js-detail-field" data-detail-field="createdAt">—</dd>

              <dt class="col-sm-4">{{ 'Actualizado el'|trans({}, 'Modules.RjMulticarrier.Admin') }}</dt>
              <dd class="col-sm-8 js-detail-field" data-detail-field="updatedAt">—</dd>

              <dt class="col-sm-4">{{ 'Cuenta'|trans({}, 'Modules.RjMulticarrier.Admin') }}</dt>
              <dd class="col-sm-8 js-detail-field" data-detail-field="account">—</dd>

              <dt class="col-sm-4">{{ 'Producto'|trans({}, 'Modules.RjMulticarrier.Admin') }}</dt>
              <dd class="col-sm-8 js-detail-field" data-detail-field="product">—</dd>

              <dt class="col-sm-4">{{ 'Marcado eliminado'|trans({}, 'Modules.RjMulticarrier.Admin') }}</dt>
              <dd
                class="col-sm-8 js-detail-field"
                data-detail-field="deleted"
                data-detail-render="boolean"
                data-detail-true="{{ 'Sí'|trans({}, 'Admin.Global') }}"
                data-detail-false="{{ 'No'|trans({}, 'Admin.Global') }}"
              >—</dd>
            </dl>

            <h4 class="h6">{{ 'Paquete'|trans({}, 'Modules.RjMulticarrier.Admin') }}</h4>
            <pre class="bg-light p-2 rounded text-break js-detail-field" data-detail-field="package" data-detail-render="json">{{ 'Sin datos de paquete.'|trans({}, 'Modules.RjMulticarrier.Admin') }}</pre>

            <h4 class="h6 mt-3">{{ 'Etiquetas'|trans({}, 'Modules.RjMulticarrier.Admin') }}</h4>
            <pre class="bg-light p-2 rounded text-break js-detail-field" data-detail-field="labels" data-detail-render="json">{{ 'Sin etiquetas generadas.'|trans({}, 'Modules.RjMulticarrier.Admin') }}</pre>

            <h4 class="h6 mt-3">{{ 'Petición'|trans({}, 'Modules.RjMulticarrier.Admin') }}</h4>
            <pre class="bg-light p-2 rounded text-break js-detail-field" data-detail-field="requestPayload">{{ 'Sin datos de petición.'|trans({}, 'Modules.RjMulticarrier.Admin') }}</pre>

            <h4 class="h6 mt-3">{{ 'Respuesta'|trans({}, 'Modules.RjMulticarrier.Admin') }}</h4>
            <pre class="bg-light p-2 rounded text-break js-detail-field" data-detail-field="responsePayload">{{ 'Sin datos de respuesta.'|trans({}, 'Modules.RjMulticarrier.Admin') }}</pre>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">{{ 'Cerrar'|trans({}, 'Admin.Actions') }}</button>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
