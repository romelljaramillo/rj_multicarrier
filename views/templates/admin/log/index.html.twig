{% extends '@PrestaShop/Admin/layout.html.twig' %}

{% block content %}
  <div class="row">
    <div class="col-12">
      {% embed '@PrestaShop/Admin/Common/Grid/grid_panel.html.twig' with { grid: grid } %}
        {% block grid_panel_header %}
          <div class="card-header js-grid-header d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
              <h3 class="card-header-title mb-0">{{ 'Logs de envíos'|trans({}, 'Modules.RjMulticarrier.Admin') }}</h3>
              <span class="badge badge-secondary ml-2">{{ grid.data.records_total }}</span>
            </div>
            <div class="d-flex align-items-center">
              {{ include('@PrestaShop/Admin/Common/Grid/Blocks/grid_actions.html.twig', { grid: grid }) }}
            </div>
          </div>
        {% endblock %}
      {% endembed %}
    </div>
  </div>

  <div
    class="modal fade js-detail-modal"
    id="rj_log_detail_modal"
    tabindex="-1"
    role="dialog"
    aria-hidden="true"
    data-empty="{{ 'No disponible'|trans({}, 'Modules.RjMulticarrier.Admin') }}"
    data-error-generic="{{ 'No se pudo cargar el detalle del registro.'|trans({}, 'Modules.RjMulticarrier.Admin') }}"
    data-error-not-found="{{ 'El registro solicitado ya no existe.'|trans({}, 'Modules.RjMulticarrier.Admin') }}"
    data-trigger=".js-log-view-row-action"
  >
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title mb-0">{{ 'Detalle del registro'|trans({}, 'Modules.RjMulticarrier.Admin') }}</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="{{ 'Cerrar'|trans({}, 'Admin.Actions') }}">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="alert alert-danger d-none js-log-detail-error js-detail-error" role="alert"></div>

          <div class="text-center my-4 d-none js-log-detail-spinner js-detail-spinner">
            <span class="spinner-border" role="status" aria-hidden="true"></span>
            <span class="sr-only">{{ 'Cargando…'|trans({}, 'Admin.Actions') }}</span>
          </div>

          <div class="js-log-detail-content js-detail-content d-none">
            <dl class="row">
              <dt class="col-sm-4">{{ 'ID'|trans({}, 'Modules.RjMulticarrier.Admin') }}</dt>
              <dd class="col-sm-8 js-log-detail-id js-detail-field" data-detail-field="id">—</dd>

              <dt class="col-sm-4">{{ 'Nombre'|trans({}, 'Modules.RjMulticarrier.Admin') }}</dt>
              <dd class="col-sm-8 js-log-detail-name js-detail-field" data-detail-field="name">—</dd>

              <dt class="col-sm-4">{{ 'ID pedido'|trans({}, 'Modules.RjMulticarrier.Admin') }}</dt>
              <dd class="col-sm-8 js-log-detail-order js-detail-field" data-detail-field="orderId">—</dd>

              <dt class="col-sm-4">{{ 'Creado el'|trans({}, 'Modules.RjMulticarrier.Admin') }}</dt>
              <dd class="col-sm-8 js-log-detail-created js-detail-field" data-detail-field="createdAt">—</dd>

              <dt class="col-sm-4">{{ 'Actualizado el'|trans({}, 'Modules.RjMulticarrier.Admin') }}</dt>
              <dd class="col-sm-8 js-log-detail-updated js-detail-field" data-detail-field="updatedAt">—</dd>
            </dl>

            <h4 class="h6">{{ 'Petición'|trans({}, 'Modules.RjMulticarrier.Admin') }}</h4>
            <pre class="bg-light p-2 rounded text-break js-log-detail-request js-detail-field" data-detail-field="requestPayload">{{ 'Sin datos de petición.'|trans({}, 'Modules.RjMulticarrier.Admin') }}</pre>

            <h4 class="h6 mt-3">{{ 'Respuesta'|trans({}, 'Modules.RjMulticarrier.Admin') }}</h4>
            <pre class="bg-light p-2 rounded text-break js-log-detail-response js-detail-field" data-detail-field="responsePayload">{{ 'Sin datos de respuesta.'|trans({}, 'Modules.RjMulticarrier.Admin') }}</pre>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">{{ 'Cerrar'|trans({}, 'Admin.Actions') }}</button>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
